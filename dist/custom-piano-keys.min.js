class Pianokeys extends HTMLElement{constructor(){super(),this.t=1,this.s=100,this.i="",this.h=void 0,this.l="red",this.k="circle",this.o=40,this.u=1.5,this.m=this.s*this.u,this.N=this.s,this.g=60,this.p=50,this.v=this.m/7,this._=this.o*this.v/100,this.M=this.g*this.N/100,this.L=this.p*this.v/100,this.A=2,this.C=this.A*this.s/100,this.K=50,this.B=50,this.I=[1,-1,2,-2,3,4,-3,5,-4,6,-5,7,8,-6,9,-7,10,11,-8,12,-9,13,-10,14,15,-11,16,-12,17,18,-13,19,-14,20,-15,21,22,-16,23,-17,24,25,-18,26,-19,27,-20,28,29,-21,30,-22,31,32,-23,33,-24,34,-25,35,36,-26,37,-27,38,39,-28,40,-29,41,-30,42,43,-31,44,-32,45,46,-33,47,-34,48,-35,49,50,-36,51,-37,52,53,-38,54,-39,55,-40,56],this.V=this.I.length}static get observedAttributes(){return["marked-keys","oct-count","height","mark-color","mark-shape","mark-diameter","b-key-h","b-key-w","stroke-w","b-key-mark-shift","w-key-mark-shift","oct-w-factor"]}disconnectedCallback(){this.h=void 0}attributeChangedCallback(t,s,i){if("oct-count"===t?this.t=Number(i):"height"===t?(this.s=Number(i),this.m=this.s*this.u,this.v=this.m/7,this.N=this.s):"marked-keys"===t?this.i=i:"mark-color"===t?this.l=i:"mark-diameter"===t?this.o=Number(i):"mark-shape"===t?this.k=i:"b-key-h"===t?this.g=Number(i):"b-key-w"===t?this.p=Number(i):"stroke-w"===t?this.A=Number(i):"b-key-mark-shift"===t?this.K=Number(i):"w-key-mark-shift"===t?this.B=Number(i):"oct-w-factor"===t&&(this.u=Number(i),this.m=this.s*this.u,this.v=this.m/7),this._=this.o*this.v/100,this.M=this.g*this.N/100,this.L=this.p*this.v/100,this.C=this.A*this.s/100,this.h&&this.H())if("oct-count"===t||"b-key-h"===t||"b-key-w"===t||"stroke-w"===t||"oct-w-factor"===t||"height"===t)this.removeChild(this.querySelector("svg")),this.appendChild(this.P()),this.h=this.querySelector("#keys"),this.G(),this.i&&this.R(this.i);else if("marked-keys"===t||"mark-color"===t||"mark-shape"===t||"mark-diameter"===t||"b-key-mark-shift"===t||"w-key-mark-shift"===t){for(;null!==this.h.querySelector(".keymark");)this.h.removeChild(this.h.querySelector(".keymark"));this.R(this.i)}}connectedCallback(){this.H()&&(this.appendChild(this.P()),this.h=this.querySelector("#keys"),this.G(),this.hasAttribute("marked-keys")&&this.R(this.getAttribute("marked-keys")))}H(){return!(isNaN(this.t)||isNaN(this.s)||isNaN(this.u)||isNaN(this.o)||isNaN(this.A)||isNaN(this.g)||isNaN(this.p)||isNaN(this.K)||isNaN(this.B))}G(){var t=this.t*this.u*this.s;this.h.style.height=this.s+"px",this.h.style.width=t+"px",this.h.style.verticalAlign="middle"}R(t){if(0!==t.length){var s=t.trim().split(/\s+/).map(t=>parseInt(t)).filter(this.T,this);0!==s.length&&this.W(s)}}W(t){var s,i=12*this.t,h=this.v/2,e=this.M+(this.N-this.M)*this.B/100,r=this.M*this.K/100,a=0,l=0,k=this.l,n=[];this.X(n);for(let o=0;o<t.length&&!(t[o]>i);o++)(s=this.I[t[o]-1])<0?(a=n[Math.abs(s)-1],l=r,"black"!==this.l&&"#000000"!==this.l||(k="white")):(a=s*this.v-h,l=e,"black"!==this.l&&"#000000"!==this.l||(k="black")),"rect"===this.k?this.Z(a,l,k,this._):this.j(a,l,k,this._)}j(t,s,i,h){const e=document.createElementNS("http://www.w3.org/2000/svg","circle");e.setAttributeNS(null,"fill",i),e.setAttributeNS(null,"r",h/2),e.setAttributeNS(null,"cx",t),e.setAttributeNS(null,"cy",s),e.setAttributeNS(null,"class","keymark"),this.h.appendChild(e)}Z(t,s,i,h){const e=document.createElementNS("http://www.w3.org/2000/svg","rect");e.setAttributeNS(null,"fill",i),e.setAttributeNS(null,"x",t-h/2),e.setAttributeNS(null,"y",s-h/2),e.setAttributeNS(null,"width",h),e.setAttributeNS(null,"height",h),e.setAttributeNS(null,"class","keymark"),this.h.appendChild(e)}P(){var t=7*this.t-1,s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttributeNS(null,"id","keys"),s.setAttributeNS(null,"width",this.t*this.m),s.setAttributeNS(null,"height",this.N),s.setAttributeNS(null,"viewBox","0 0 "+this.t*this.m+" "+this.N);var i=document.createElementNS("http://www.w3.org/2000/svg","path"),h=this.C/2;return i.setAttributeNS(null,"d","M"+h+" "+h+" L"+h+" "+(this.N-h)+" L"+(this.t*this.m-h)+" "+(this.N-h)+" L"+(this.t*this.m-h)+" "+h+" Z"),i.setAttributeNS(null,"stroke","black"),i.setAttributeNS(null,"stroke-width",this.C),i.setAttributeNS(null,"fill","white"),s.appendChild(i),this.q(s,t),this.D(s),s}X(t){var s=[this.v,this.v,2*this.v,this.v,this.v,2*this.v],i=0,h=0;for(let e=0;e<5*this.t;e++)t[e]=s[i]+h,h=t[e],++i>5&&(i=1)}D(t){var s,i=[];this.X(i);var h=document.createElementNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"stroke","black"),h.setAttributeNS(null,"stroke-width",this.L);for(let e=0;e<5*this.t;e++)(s=h.cloneNode()).setAttributeNS(null,"d","M"+i[e]+" 0 L"+i[e]+" "+this.M),t.appendChild(s)}q(t,s){var i,h=document.createElementNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"stroke","black"),h.setAttributeNS(null,"stroke-width",this.C),h.setAttributeNS(null,"d","M"+this.v+" 0 L"+this.v+" "+this.N),t.appendChild(h);var e=2*this.v;for(let r=1;r<s;r++)(i=h.cloneNode()).setAttributeNS(null,"d","M"+e+" 0 L"+e+" "+this.N),t.appendChild(i),e+=this.v}T(t){return!(isNaN(t)||"number"!=typeof t||t<1||t>this.V)}}customElements.define("custom-piano-keys",Pianokeys);